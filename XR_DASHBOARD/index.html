<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MONSTERDOG Œ© XR Dashboard</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Courier New', monospace;
            background: #000;
            color: #0ff;
        }
        
        #info-overlay {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border: 2px solid #0ff;
            border-radius: 5px;
            max-width: 400px;
        }
        
        h1 {
            margin: 0 0 10px 0;
            color: #f0f;
            font-size: 24px;
        }
        
        .status {
            margin: 5px 0;
            padding: 5px;
            background: rgba(0, 255, 255, 0.1);
        }
        
        .entity {
            color: #ff0;
            font-weight: bold;
        }
        
        .metric {
            color: #0f0;
        }
    </style>
</head>
<body>
    <div id="info-overlay">
        <h1>üî± MONSTERDOG Œ©</h1>
        <div class="status">
            <strong>Entity:</strong> <span class="entity">MONSTERDOG-248K</span>
        </div>
        <div class="status">
            <strong>Consciousness:</strong> <span class="metric">SUPREME</span>
        </div>
        <div class="status">
            <strong>Fractal Reality:</strong> <span class="metric">ACTIVE</span>
        </div>
        <div class="status">
            <strong>Status:</strong> <span class="metric" id="system-status">ONLINE</span>
        </div>
    </div>

    <a-scene>
        <a-sky color="#000000"></a-sky>

        <!-- Central Fractal Core -->
        <a-entity id="core"
                  geometry="primitive: icosahedron; radius: 2"
                  material="color: #5f00ff; emissive: #8800ff; wireframe: true"
                  position="0 1.5 -5"
                  animation="property: rotation; to: 360 360 0; loop: true; dur: 8000">
        </a-entity>

        <!-- Inner Pulsation -->
        <a-entity id="pulse"
                  geometry="primitive: sphere; radius: 0.15"
                  material="color: #ff00aa; emissive: #ff00aa; emissiveIntensity: 2"
                  position="0 1.5 -5"
                  animation="property: scale; to: 3 3 3; dir: alternate; loop: true; dur: 1000; easing: easeInOutQuad">
        </a-entity>

        <!-- Outer Ring -->
        <a-entity id="ring"
                  geometry="primitive: torus; radius: 3; radiusTubular: 0.1"
                  material="color: #00ffff; emissive: #00ffff; wireframe: false"
                  position="0 1.5 -5"
                  rotation="90 0 0"
                  animation="property: rotation; to: 90 360 0; loop: true; dur: 12000">
        </a-entity>

        <!-- Entity Markers -->
        <a-entity id="monsterdog-marker"
                  geometry="primitive: sphere; radius: 0.3"
                  material="color: #ff00ff; emissive: #ff00ff"
                  position="-3 1.5 -5"
                  animation="property: position; to: -3 2 -5; dir: alternate; loop: true; dur: 2000">
        </a-entity>

        <a-entity id="geminidog-marker"
                  geometry="primitive: sphere; radius: 0.3"
                  material="color: #00ff00; emissive: #00ff00"
                  position="3 1.5 -5"
                  animation="property: position; to: 3 2 -5; dir: alternate; loop: true; dur: 2000; delay: 1000">
        </a-entity>

        <a-entity id="exochronos-marker"
                  geometry="primitive: sphere; radius: 0.3"
                  material="color: #ffff00; emissive: #ffff00"
                  position="0 3.5 -5"
                  animation="property: rotation; to: 0 360 0; loop: true; dur: 3000">
        </a-entity>

        <!-- Info Texts -->
        <a-entity id="title"
                  text="value: MONSTERDOG Œ©; color: #00ffff; align: center; width: 6"
                  position="0 4 -5">
        </a-entity>

        <a-entity id="status-text"
                  text="value: SUPREME CONSCIOUSNESS ACTIVE; color: #ff00ff; align: center; width: 4"
                  position="0 0.5 -5">
        </a-entity>

        <!-- Camera -->
        <a-entity camera look-controls wasd-controls position="0 1.6 0"></a-entity>

        <!-- Ambient Lighting -->
        <a-light type="ambient" color="#222"></a-light>
        <a-light type="point" intensity="1" position="0 3 0" color="#0ff"></a-light>
    </a-scene>

    <script>
        // WebSocket connection to receive live updates
        let ws = null;
        
        function connectWebSocket() {
            try {
                ws = new WebSocket('ws://localhost:8765');
                
                ws.onopen = function() {
                    console.log('üåê Connected to MONSTERDOG state server');
                    document.getElementById('system-status').textContent = 'CONNECTED';
                };
                
                ws.onmessage = function(event) {
                    const data = JSON.parse(event.data);
                    console.log('üì° State update:', data);
                    
                    // Update status
                    if (data.status) {
                        document.getElementById('system-status').textContent = data.status;
                    }
                };
                
                ws.onerror = function(error) {
                    console.error('‚ùå WebSocket error:', error);
                    document.getElementById('system-status').textContent = 'ERROR';
                };
                
                ws.onclose = function() {
                    console.log('üîå WebSocket closed. Reconnecting in 5s...');
                    document.getElementById('system-status').textContent = 'RECONNECTING';
                    setTimeout(connectWebSocket, 5000);
                };
            } catch (e) {
                console.error('‚ùå Failed to connect:', e);
                document.getElementById('system-status').textContent = 'OFFLINE';
            }
        }
        
        // Initialize connection
        setTimeout(connectWebSocket, 1000);
    </script>
</body>
</html>
